var parseuri=require("parseuri");var debug=require("debug")("socket.io-client:url");module.exports=url;function url(c,e){var d=c;e=e||global.location;if(null==c){c=e.protocol+"//"+e.host}if("string"===typeof c){if("/"===c.charAt(0)){if("/"===c.charAt(1)){c=e.protocol+c}else{c=e.host+c}}if(!/^(https?|wss?):\/\//.test(c)){debug("protocol-less url %s",c);if("undefined"!==typeof e){c=e.protocol+"//"+c}else{c="https://"+c}}debug("parse %s",c);d=parseuri(c)}if(!d.port){if(/^(http|ws)$/.test(d.protocol)){d.port="80"}else{if(/^(http|ws)s$/.test(d.protocol)){d.port="443"}}}d.path=d.path||"/";var a=d.host.indexOf(":")!==-1;var b=a?"["+d.host+"]":d.host;d.id=d.protocol+"://"+b+":"+d.port;d.href=d.protocol+"://"+b+(e&&e.port===d.port?"":(":"+d.port));return d};