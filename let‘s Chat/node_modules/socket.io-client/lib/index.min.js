var url=require("./url");var parser=require("socket.io-parser");var Manager=require("./manager");var debug=require("debug")("socket.io-client");module.exports=exports=lookup;var cache=exports.managers={};function lookup(e,b){if(typeof e==="object"){b=e;e=undefined}b=b||{};var h=url(e);var a=h.source;var d=h.id;var i=h.path;var f=cache[d]&&i in cache[d].nsps;var c=b.forceNew||b["force new connection"]||false===b.multiplex||f;var g;if(c){debug("ignoring socket cache for %s",a);g=Manager(a,b)}else{if(!cache[d]){debug("new io instance for %s",a);cache[d]=Manager(a,b)}g=cache[d]}if(h.query&&!b.query){b.query=h.query}return g.socket(h.path,b)}exports.protocol=parser.protocol;exports.connect=lookup;exports.Manager=require("./manager");exports.Socket=require("./socket");