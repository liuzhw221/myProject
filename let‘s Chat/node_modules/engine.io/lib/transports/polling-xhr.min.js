var Polling=require("./polling");var util=require("util");module.exports=XHR;function XHR(a){Polling.call(this,a)}util.inherits(XHR,Polling);XHR.prototype.onRequest=function(b){if("OPTIONS"===b.method){var a=b.res;var c=this.headers(b);c["Access-Control-Allow-Headers"]="Content-Type";a.writeHead(200,c);a.end()}else{Polling.prototype.onRequest.call(this,b)}};XHR.prototype.headers=function(a,b){b=b||{};if(a.headers.origin){b["Access-Control-Allow-Credentials"]="true";b["Access-Control-Allow-Origin"]=a.headers.origin}else{b["Access-Control-Allow-Origin"]="*"}return Polling.prototype.headers.call(this,a,b)};