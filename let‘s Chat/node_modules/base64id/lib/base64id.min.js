/*!
 * base64id v0.1.0
 */
;var crypto=require("crypto");var Base64Id=function(){};Base64Id.prototype.getRandomBytes=function(c){var f=4096;var d=this;c=c||12;if(c>f){return crypto.randomBytes(c)}var e=parseInt(f/c);var b=parseInt(e*0.85);if(!b){return crypto.randomBytes(c)}if(this.bytesBufferIndex==null){this.bytesBufferIndex=-1}if(this.bytesBufferIndex==e){this.bytesBuffer=null;this.bytesBufferIndex=-1}if(this.bytesBufferIndex==-1||this.bytesBufferIndex>b){if(!this.isGeneratingBytes){this.isGeneratingBytes=true;crypto.randomBytes(f,function(h,g){d.bytesBuffer=g;d.bytesBufferIndex=0;d.isGeneratingBytes=false})}if(this.bytesBufferIndex==-1){return crypto.randomBytes(c)}}var a=this.bytesBuffer.slice(c*this.bytesBufferIndex,c*(this.bytesBufferIndex+1));this.bytesBufferIndex++;return a};Base64Id.prototype.generateId=function(){var a=new Buffer(15);if(!a.writeInt32BE){return Math.abs(Math.random()*Math.random()*Date.now()|0).toString()+Math.abs(Math.random()*Math.random()*Date.now()|0).toString()}this.sequenceNumber=(this.sequenceNumber+1)|0;a.writeInt32BE(this.sequenceNumber,11);if(crypto.randomBytes){this.getRandomBytes(12).copy(a)}else{[0,4,8].forEach(function(b){a.writeInt32BE(Math.random()*Math.pow(2,32)|0,b)})}return a.toString("base64").replace(/\//g,"_").replace(/\+/g,"-")};exports=module.exports=new Base64Id();