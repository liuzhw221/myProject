if(typeof module!=="undefined"){module.exports=Emitter}function Emitter(a){if(a){return mixin(a)}}function mixin(b){for(var a in Emitter.prototype){b[a]=Emitter.prototype[a]}return b}Emitter.prototype.on=Emitter.prototype.addEventListener=function(b,a){this._callbacks=this._callbacks||{};(this._callbacks["$"+b]=this._callbacks["$"+b]||[]).push(a);return this};Emitter.prototype.once=function(c,b){function a(){this.off(c,a);b.apply(this,arguments)}a.fn=b;this.on(c,a);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(e,c){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var d=this._callbacks["$"+e];if(!d){return this}if(1==arguments.length){delete this._callbacks["$"+e];return this}var a;for(var b=0;b<d.length;b++){a=d[b];if(a===c||a.fn===c){d.splice(b,1);break}}return this};Emitter.prototype.emit=function(e){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),d=this._callbacks["$"+e];if(d){d=d.slice(0);for(var c=0,a=d.length;c<a;++c){d[c].apply(this,b)}}return this};Emitter.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks["$"+a]||[]};Emitter.prototype.hasListeners=function(a){return !!this.listeners(a).length};