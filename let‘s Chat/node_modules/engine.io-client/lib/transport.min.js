var parser=require("engine.io-parser");var Emitter=require("component-emitter");module.exports=Transport;function Transport(a){this.path=a.path;this.hostname=a.hostname;this.port=a.port;this.secure=a.secure;this.query=a.query;this.timestampParam=a.timestampParam;this.timestampRequests=a.timestampRequests;this.readyState="";this.agent=a.agent||false;this.socket=a.socket;this.enablesXDR=a.enablesXDR;this.pfx=a.pfx;this.key=a.key;this.passphrase=a.passphrase;this.cert=a.cert;this.ca=a.ca;this.ciphers=a.ciphers;this.rejectUnauthorized=a.rejectUnauthorized;this.forceNode=a.forceNode;this.extraHeaders=a.extraHeaders;this.localAddress=a.localAddress}Emitter(Transport.prototype);Transport.prototype.onError=function(c,b){var a=new Error(c);a.type="TransportError";a.description=b;this.emit("error",a);return this};Transport.prototype.open=function(){if("closed"===this.readyState||""===this.readyState){this.readyState="opening";this.doOpen()}return this};Transport.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.doClose();this.onClose()}return this};Transport.prototype.send=function(a){if("open"===this.readyState){this.write(a)}else{throw new Error("Transport not open")}};Transport.prototype.onOpen=function(){this.readyState="open";this.writable=true;this.emit("open")};Transport.prototype.onData=function(a){var b=parser.decodePacket(a,this.socket.binaryType);this.onPacket(b)};Transport.prototype.onPacket=function(a){this.emit("packet",a)};Transport.prototype.onClose=function(){this.readyState="closed";this.emit("close")};